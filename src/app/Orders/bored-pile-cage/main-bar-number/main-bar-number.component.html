<div class="modal-header">
  <h3 class="modal-title">Bored Pile Cage</h3>
  <button type="button" class="close" (click)="dismissModal()">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<div class="modal-body">
  <div class="row">
     <div class="col-md-6">
      <div class="form-group">
        <label for="pileTypeInput" class="form-label"><strong>Pile Type:</strong></label>
        <input type="text" id="pileTypeInput" class="form-control" [value]="Insert_BPC_Structuremarking.pile_type"
          readonly />
      </div>
    </div>
    <div class="col-md-6" *ngIf="isSelectLayerVisible()">
      <div class="form-group">
        <label for="select_layer" class="form-label"><strong>Select Layer:</strong></label>
        <select class="form-control" id="select_layer" name="select_layer" [(ngModel)]="selectedLayer"
          (change)="onLayerChange()">
          <option value="InnerLayer">Inner Layer</option>
          <option value="OuterLayer">Outer Layer</option>
        </select>
      </div>
    </div>
 
  <div class="col-md-6">
  <div class="d-flex align-items-center" style="padding-left: 0;margin-left:2rem">
    <label
      class="fw-semibold"
      for="mainToggle"
      style="margin-top: 2rem;"
    >
      {{ allSelected ? 'Unselect All' : 'Select All' }}
    </label>

    <div class="form-check form-switch">
      <input
        class="form-check-input"
        type="checkbox"
        [checked]="allSelected"
        (change)="toggleAll($event)"
        id="mainToggle"
      />
    </div>
</div>

</div>


  </div>

  <div class="row">
    <div class="col-md-6 table-responsive table-wrapper-scroll-y my-custom-scrollbar">
      <table class="table table-hover table-bordered w-100">
        <thead style="
            width: fit-content;
            background-color: #dee2e6;
            font-size: 11px;
            position: sticky;
            top: 0;
          ">
          <tr>
            <th>S.No</th>
            <th>Angle</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody style="width: fit-content;overflow: auto;height: 500px;"
          *ngIf="this.pileType != 'Double-Layer' && Insert_BPC_Structuremarking.main_bar_arrange != 'In-Out'">
          <tr *ngFor="let machine of machineList">
            <td>{{ machine.id }}</td>
            <td>{{ machine.angle }}</td>
            <td>
              <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" [checked]="machine.selected"
                  (change)="toggleMainBar(machine, $event)" />
              </div>
            </td>
          </tr>
        </tbody>
        <tbody style="width: fit-content;overflow: auto;height: 500px;"
          *ngIf="(this.pileType == 'Double-Layer' || Insert_BPC_Structuremarking.main_bar_arrange === 'In-Out')  && this.selectedLayer == 'OuterLayer'">
          <tr *ngFor="let machine of outerList">
            <td>{{ machine.id }}</td>
            <td>{{ machine.angle }}</td>
            <td>
              <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" [checked]="machine.selected"
                  (change)="toggleMainBarLayers(machine, $event,outerList)" />
              </div>
            </td>
          </tr>
        </tbody>
        <tbody style="width: fit-content;overflow: auto;height: 500px;"
          *ngIf="(this.pileType == 'Double-Layer'|| Insert_BPC_Structuremarking.main_bar_arrange === 'In-Out')  && this.selectedLayer != 'OuterLayer'">
          <tr *ngFor="let machine of innerList">
            <td>{{ machine.id }}</td>
            <td>{{ machine.angle }}</td>
            <td>
              <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" [checked]="machine.selected"
                  (change)="toggleMainBarLayers(machine, $event,innerList)" />
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="col-md-6 overflow-hidden">
      <canvas #canvasElement width="400" height="500"></canvas>
    </div>
  </div>
  <!-- pagination -->
  <!-- <div class="card-footer">
    <div class="d-flex">
      <ngb-pagination [collectionSize]="machineList.length" [pageSize]="itemsPerPage" [(page)]="currentPage"
        (pageChange)="onPageChange($event)" [boundaryLinks]="true" [maxSize]="maxSize">
      </ngb-pagination>

      <select class="custom-select mr-2 ml-3" style="width: auto" [(ngModel)]="itemsPerPage"
        (ngModelChange)="OnPageSizeChange($event)">
        <option [ngValue]="5">5</option>
        <option [ngValue]="10">10</option>
        <option [ngValue]="20">20</option>
      </select>
      <span style="margin-top: 5px">Items per page</span>
    </div>
  </div> -->
</div>
<div class="modal-footer d-flex justify-content-center">
  <!-- <button class="btn btn-primary" (click)="createMainDoubleBarImage()"
    *ngIf="this.pileType == 'Double-Layer' || Insert_BPC_Structuremarking.main_bar_arrange=='In-Out'">
    Preview
  </button>
  <button class="btn btn-primary" (click)="createMainBarImage()"
    *ngIf="this.pileType != 'Double-Layer' && Insert_BPC_Structuremarking.main_bar_arrange !='In-Out'">
    Preview
  </button> -->
  <button class="btn btn-primary" (click)="updateData()">Save</button>
  <button type="button" class="btn btn-secondary" (click)="dismissModal()">
    Close
  </button>
</div>